{% extends "base.html" %}
{% load solo_tags %}
{% load static %}
{% block header %}
{% get_solo 'cms.home' as item %}
{% include 'big_header.html' with header_video=item.video %}
{% endblock %}

{% block header-refs %}
<link rel="stylesheet" type="text/css" href="{% static "lib/css/slick.min.css" %}"/>
<link rel="stylesheet" type="text/css" href="{% static "lib/css/lity.min.css" %}"/>
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.6.0/slick-theme.css"/>
{% endblock %}

{% block content %}
{% get_solo 'cms.home' as home %}
{% get_solo 'cms.boutique' as boutique %}
{% get_solo 'cms.contacto' as contacto %}

<main class="black-background">
    <div class="black-wrapper">
        <ul class="titles-slide">
            {% for item in list_frases %}
            <li>
                <h1>{{ item.title }}</h1>
            </li>
            {% endfor %}
        </ul>
    </div>
    <div class="margin"></div>
    <div class="wrapper">
        <section class="messages">
            {% for item in list_messages %}
            <article class="red-message">
                <a href="{{ item.url }}">
                    <h3>{{ item.title }}</h3>
                    <div class="rich-text">
                        {{ item.description | safe }}
                    </div>
                </a>
            </article>
            {% endfor %}
        </section>
        <div class="margin"></div>
        <section class="mosaicos">
            {% for item in list_mosaicos %}
            <article>
                <div class="cover">
                    <img src="{{ item.image.url }}" alt="{{ item.title }}">
                    <a href="{{ item.url }}"></a>
                </div>
                <h3>{{ item.title }}</h3>
            </article>
            {% endfor %}
        </section>
    </div>
    <div class="margin"></div>
</main>

<main class="black-background">
    <div class="wrapper big">
        {{  home.description | safe }}
    </div>
    <div class="margin"></div>
</main>

<main class="black-background">
    <div class="wrapper">

        <div class="home-foto">
            <img src="{{  home.image_objetivo.url }}" alt="objetivo">
            <div class="rich-text">
                <h2>objetivo</h2>
                {{  home.description_objetivo | safe }}
            </div>
        </div>

        <div class="margin"></div>

        <div class="home-foto">
            <div class="rich-text">
                <h2>resolucion</h2>
                {{  home.description_resolucion | safe }}
            </div>
            <img src="{{  home.image_resolucion.url }}" alt="objetivo">
        </div>

    </div>
    <div class="margin"></div>
</main>


<main class="black-background">
    <div class="black-wrapper">
        <h1>guia del alumno</h1>
    </div>
    <div class="wrapper">
        {% for item in list_guia %}
        <article class="red-message">
            <a href="{{item.file}}">
                <h3>{{ item.title }}</h3>
                {% if item.description %}
                <div class="rich-text">
                    {{ item.description | safe }}
                </div>
                {% endif %}
            </a>
        </article>
        {% endfor %}
    </div>
</main>

<main class="black-background">
    <div class="black-wrapper">
        <h1>Boutique</h1>
    </div>
    <div class="wrapper">
        <div class="big rich-text">
            {{ boutique.description | safe }}
        </div>
        <div class="red-message">
            <a href="{{ boutique.link }}">visita nuestro CAT√ÅLOGO</a>
        </div>
    </div>
    <div class="margin"></div>
</main>

<main class="black-background">
    <div class="black-wrapper">
        <h1>contacto</h1>
    </div>
    <div class="wrapper">
        <div class="big">
            <u>{{ contacto.title }}</u>
        </div>
        <div class="big rich-text">
            {{ contacto.description | safe }}
        </div>
    </div>
</main>

{% endblock %}

{% block footer-refs %}
<script type="text/javascript" src="{% static "lib/js/slick.min.js" %}"></script>
<script>
    $('.titles-slide').slick({
        dots: false,
        infinite: true,
        speed: 500,
        fade: true,
        cssEase: 'linear',
        autoplay: true,
        autoplaySpeed: 5000,
    });
</script>
<script>
    $(function() {
        var messages = $('.messages .red-message');
        var count = 0;

        function timeout(time) {
            window.setTimeout(()=> {
                $.map(messages, element => element.className = 'red-message');
                messages[count].className = 'red-message active';
                count ++;
                if(count > messages.length - 1)
                    count = 0;
            }, 500);

            window.setTimeout(()=> {
                timeout(time);
            }, time);
        }
        timeout(2000);
    });
</script>
{% endblock %}
